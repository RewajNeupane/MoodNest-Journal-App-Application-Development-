@inherits LayoutComponentBase
@inject ThemeService Theme
@inject MoodNest.Components.Services.PinAuthService Auth
@inject NavigationManager Nav

<div class="@Theme.CssClass layout-root">

    <!-- SIDEBAR -->
    <aside class="sidebar">
        <TestNav />
    </aside>

    <!-- MAIN CONTENT -->
    <div class="layout-main">

        <!-- HEADER -->
        <header class="topbar">
            <div class="topbar-left">
                <span class="page-title"></span>
            </div>

            <div class="topbar-right">
                <button class="icon-btn"
                        title="Toggle theme"
                        @onclick="ToggleTheme">
                    @(Theme.IsDark ? "â˜€ï¸" : "ğŸŒ™")
                </button>

                <button class="icon-btn"
                        title="Lock"
                        @onclick="LockApp">
                    ğŸ”’
                </button>
            </div>
        </header>

        <!-- PAGE CONTENT -->
        <main class="content-area">
            @Body
        </main>

        <!-- FOOTER -->
        <footer class="footer">
            <p>Â© 2025 MoodNest Â· CS6004 Application Development</p>
        </footer>

    </div>

</div>

@code {
    private void ToggleTheme()
    {
        Theme.Toggle();
        StateHasChanged();
    }

    private void LockApp()
    {
        Auth.Lock();
        Nav.NavigateTo("/", replace: true);
    }
}