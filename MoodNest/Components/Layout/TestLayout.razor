@inherits LayoutComponentBase
@inject ThemeService Theme

<div class="@Theme.CssClass layout-root">

    <!-- SIDEBAR -->
    <aside class="sidebar">
        <TestNav />
    </aside>

    <!-- MAIN CONTENT -->
    <div class="layout-main">

        <!-- HEADER -->
        <header class="topbar">
            <div class="topbar-left">
                <span class="page-title"></span>
            </div>

            <div class="topbar-right">
                <button class="icon-btn"
                        title="Toggle theme"
                        @onclick="ToggleTheme">
                    @(Theme.IsDark ? "‚òÄÔ∏è" : "üåô")
                </button>

                <button class="icon-btn" title="Lock">
                    üîí
                </button>
            </div>
        </header>

        <!-- PAGE CONTENT -->
        <main class="content-area">

            <ErrorBoundary @ref="_errorBoundary">

                <ChildContent>
                    @Body
                </ChildContent>

                <ErrorContent Context="ex">
                    <div class="error-box">
                        <strong>Unhandled exception:</strong>
                        <br />
                        @ex.ToString()
                    </div>
                </ErrorContent>

            </ErrorBoundary>

        </main>

        <!-- FOOTER -->
        <footer class="footer">
            <p>¬© 2025 MoodNest ¬∑ CS6004 Application Development</p>
        </footer>

    </div>

</div>

@code {
    private ErrorBoundary? _errorBoundary;

    private void ToggleTheme()
    {
        Theme.Toggle();
        StateHasChanged();
    }
}