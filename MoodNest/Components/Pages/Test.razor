@page "/test"
@layout TestLayout
@inject NavigationManager Nav
@inject IJournalService JournalService


<div class="dashboard">

    <!-- LEFT: STATS & ANALYTICS -->
    <div class="stats-grid">

        <div class="stat-card">
            <h4>ğŸ”¥ Current Streak</h4>
            <p class="stat-value">@Stats.CurrentStreak Days</p>
        </div>

        <div class="stat-card">
            <h4>ğŸ† Longest Streak</h4>
            <p class="stat-value">@Stats.LongestStreak Days</p>
        </div>

        <div class="stat-card">
            <h4>âŒ Missed Days</h4>
            <p class="stat-value">@Stats.MissedDays</p>
        </div>

        <div class="stat-card">
            <h4>ğŸ˜Š Most Frequent Mood</h4>
            <p class="stat-value">@Stats.MostFrequentMood</p>
        </div>


        <!-- QUICK ANALYTICS -->
        <div class="stat-card wide">
            <h4>ğŸ“Š Mood Breakdown</h4>

            <ul class="mood-stats">
                <li>
                    <span class="dot positive"></span>
                    Positive â€” @Stats.PositivePercentage%
                </li>
                <li>
                    <span class="dot neutral"></span>
                    Neutral â€” @Stats.NeutralPercentage%
                </li>
                <li>
                    <span class="dot negative"></span>
                    Negative â€” @Stats.NegativePercentage%
                </li>
            </ul>
        </div>


    </div>

    <!-- RIGHT: HERO + SHORTCUTS -->
    <div class="dashboard-hero">

        <span class="badge">Dashboard</span>

        <img src="images/sunflower.png"
             alt="Sunflower"
             class="hero-image" />

        <h1>
            Reflect on your <br />
            <span>thoughts & moods</span>
        </h1>

        <p class="subtitle">
            A simple daily habit to understand yourself better,
            track emotional patterns, and grow mindfully over time.
        </p>

        <div class="quick-actions">
            <button class="primary" @onclick="GoToToday">
                âœï¸ Todayâ€™s Entry
            </button>

            <button class="secondary" @onclick="GoToCalendar">
                ğŸ“… Calendar
            </button>

            <button class="secondary" @onclick="GoToAnalytics">
                ğŸ“Š Analytics
            </button>
        </div>

    </div>

</div>

@code {
    private JournalStatsModel Stats = new();

    protected override async Task OnInitializedAsync()
    {
        var result = await JournalService.GetJournalStatsAsync();
        if (result.Success)
        {
            Stats = result.Data;
        }
    }

    void GoToToday() => Nav.NavigateTo("/journaltoday");
    void GoToCalendar() => Nav.NavigateTo("/calendar");
    void GoToAnalytics() => Nav.NavigateTo("/analytics");
}

