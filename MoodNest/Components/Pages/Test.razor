@page "/test"
@layout TestLayout
@inject NavigationManager Nav
@inject IJournalService JournalService

<!-- ===============================
     DASHBOARD PAGE
     =============================== -->

<div class="dashboard">

    <!-- ===============================
         LEFT SECTION: STATISTICS & ANALYTICS
         =============================== -->
    <div class="stats-grid">

        <!-- CURRENT STREAK -->
        <div class="stat-card">
            <h4>ğŸ”¥ Current Streak</h4>
            <p class="stat-value">@Stats.CurrentStreak Days</p>
        </div>

        <!-- LONGEST STREAK -->
        <div class="stat-card">
            <h4>ğŸ† Longest Streak</h4>
            <p class="stat-value">@Stats.LongestStreak Days</p>
        </div>

        <!-- MISSED DAYS -->
        <div class="stat-card">
            <h4>âŒ Missed Days</h4>
            <p class="stat-value">@Stats.MissedDays</p>
        </div>

        <!-- MOST FREQUENT MOOD -->
        <div class="stat-card">
            <h4>ğŸ˜Š Most Frequent Mood</h4>
            <p class="stat-value">@Stats.MostFrequentMood</p>
        </div>

        <!-- MOOD DISTRIBUTION SUMMARY -->
        <div class="stat-card wide">
            <h4>ğŸ“Š Mood Breakdown</h4>

            <ul class="mood-stats">
                <li>
                    <span class="dot positive"></span>
                    Positive â€” @Stats.PositivePercentage%
                </li>
                <li>
                    <span class="dot neutral"></span>
                    Neutral â€” @Stats.NeutralPercentage%
                </li>
                <li>
                    <span class="dot negative"></span>
                    Negative â€” @Stats.NegativePercentage%
                </li>
            </ul>
        </div>

    </div>

    <!-- ===============================
         RIGHT SECTION: HERO & QUICK ACTIONS
         =============================== -->
    <div class="dashboard-hero">

        <!-- PAGE BADGE -->
        <span class="badge">Dashboard</span>

        <!-- HERO IMAGE -->
        <img src="images/sunflower.png"
             alt="Sunflower"
             class="hero-image" />

        <!-- HERO HEADING -->
        <h1>
            Reflect on your <br />
            <span>thoughts & moods</span>
        </h1>

        <!-- INTRODUCTORY DESCRIPTION -->
        <p class="subtitle">
            A simple daily habit to understand yourself better,
            track emotional patterns, and grow mindfully over time.
        </p>

        <!-- QUICK NAVIGATION ACTIONS -->
        <div class="quick-actions">
            <button class="primary" @onclick="GoToToday">
                âœï¸ Todayâ€™s Entry
            </button>

            <button class="secondary" @onclick="GoToCalendar">
                ğŸ“… Calendar
            </button>

            <button class="secondary" @onclick="GoToAnalytics">
                ğŸ“Š Analytics
            </button>
        </div>

    </div>

</div>

@code {

    /* =======================
       STATE
       ======================== */

    /// <summary>
    /// Aggregated journal statistics for the dashboard.
    /// </summary>
    private JournalStatsModel Stats = new();

    /* =======================
       LIFECYCLE
       ======================== */

    /// <summary>
    /// Loads dashboard statistics on page initialization.
    /// </summary>
    protected override async Task OnInitializedAsync()
    {
        var result = await JournalService.GetJournalStatsAsync();
        if (result.Success)
        {
            Stats = result.Data;
        }
    }

    /* =======================
       NAVIGATION ACTIONS
       ======================== */

    /// <summary>
    /// Navigates to today's journal editor.
    /// </summary>
    void GoToToday() => Nav.NavigateTo("/journaltoday");

    /// <summary>
    /// Navigates to the calendar view.
    /// </summary>
    void GoToCalendar() => Nav.NavigateTo("/calendar");

    /// <summary>
    /// Navigates to the analytics page.
    /// </summary>
    void GoToAnalytics() => Nav.NavigateTo("/analytics");
}
